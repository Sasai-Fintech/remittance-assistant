@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --copilot-kit-primary-color: black;

    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

.copilotKitWindow {
  @apply  md:w-[300px] lg:w-[400px] xl:w-[450px] 2xl:w-[500px] !important;
}

.copilotKitDevConsole {
  @apply hidden !important;
}

/* Replace CopilotKit footer with Sasai branding */
.poweredBy {
  font-size: 0 !important;
  line-height: 0 !important;
  color: transparent !important;
  text-indent: -9999px !important;
  overflow: hidden !important;
  position: static !important;
  padding: 3px 0 !important;
  height: auto !important;
  margin: 0 !important;
}

.poweredBy::after {
  content: "Powered By Sasai";
  font-size: 12px !important;
  line-height: normal !important;
  color: rgb(214, 214, 214) !important;
  text-align: center !important;
  display: block !important;
  position: static !important;
  text-indent: 0 !important;
  padding: 3px 0 !important;
}

/* Modern CopilotKit Chat Styling - ChatGPT-like */
.copilotKitChat {
  @apply rounded-2xl shadow-xl;
  @apply bg-white dark:bg-zinc-900;
  @apply flex flex-col h-full;
  /* Ensure suggestions container has proper overflow */
  overflow: visible !important;
}

/* Ensure chat messages container allows proper alignment */
.copilotKitChat > div[class*="messages"],
.copilotKitChat > div[class*="Messages"],
.copilotKitChat > div:has([data-copilot-chat-message]) {
  @apply flex flex-col !important;
  @apply w-full !important;
}

/* Ensure proper bottom spacing for chat input area */
.copilotKitChat > div:last-child {
  @apply mb-0;
}

/* Add bottom margin to input container wrapper */
.copilotKitChat [class*="input"],
.copilotKitChat [class*="Input"],
.copilotKitChat form {
  @apply mb-0;
}

/* Welcome message styling */
.copilotKitChat h2,
.copilotKitChat [class*="title"],
.copilotKitChat [class*="Title"] {
  @apply text-center text-gray-700 dark:text-gray-300 !important;
  @apply text-2xl font-normal !important;
  @apply mb-8 mt-8 !important;
  @apply px-4 !important;
}

/* Input field - rounded like ChatGPT */
.copilotKitChat input[type="text"],
.copilotKitChat textarea {
  @apply rounded-full !important;
  @apply border border-gray-300 dark:border-zinc-600 !important;
  @apply bg-white dark:bg-zinc-800 !important;
  @apply px-4 py-3 !important;
  @apply text-gray-900 dark:text-gray-100 !important;
  @apply focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 !important;
  @apply transition-all !important;
}

.copilotKitChat input[type="text"]::placeholder,
.copilotKitChat textarea::placeholder {
  @apply text-gray-500 dark:text-gray-400 !important;
}

/* Send button styling */
.copilotKitChat button[type="submit"],
.copilotKitChat [data-copilot-chat-send-button] {
  @apply rounded-full !important;
  @apply bg-indigo-600 hover:bg-indigo-700 !important;
  @apply transition-all shadow-sm hover:shadow-md !important;
}

/* Cancel/Stop button when loading */
.copilotKitChat button[data-copilot-chat-stop-button] {
  @apply rounded-full !important;
  @apply bg-red-600 hover:bg-red-700 !important;
  @apply transition-all shadow-sm hover:shadow-md !important;
}

/* Markdown Table Styling in Chat Messages */
.copilotKitChat table,
.copilotKitMessage table,
[data-copilot-chat-message] table,
.custom-chat-message table {
  @apply w-full border-collapse my-4 !important;
  @apply border border-gray-300 dark:border-zinc-600 !important;
  @apply bg-white dark:bg-zinc-800 !important;
  @apply rounded-lg overflow-hidden !important;
}

.copilotKitChat table thead,
.copilotKitMessage table thead,
[data-copilot-chat-message] table thead,
.custom-chat-message table thead {
  @apply bg-gray-50 dark:bg-zinc-700 !important;
}

.copilotKitChat table th,
.copilotKitMessage table th,
[data-copilot-chat-message] table th,
.custom-chat-message table th {
  @apply border border-gray-300 dark:border-zinc-600 !important;
  @apply px-4 py-2 text-left font-semibold !important;
  @apply text-gray-900 dark:text-gray-100 !important;
}

.copilotKitChat table td,
.copilotKitMessage table td,
[data-copilot-chat-message] table td,
.custom-chat-message table td {
  @apply border border-gray-300 dark:border-zinc-600 !important;
  @apply px-4 py-2 !important;
  @apply text-gray-700 dark:text-gray-300 !important;
}

.copilotKitChat table tbody tr:hover,
.copilotKitMessage table tbody tr:hover,
[data-copilot-chat-message] table tbody tr:hover,
.custom-chat-message table tbody tr:hover {
  @apply bg-gray-50 dark:bg-zinc-700/50 !important;
}

.copilotKitChat table tbody tr:nth-child(even),
.copilotKitMessage table tbody tr:nth-child(even),
[data-copilot-chat-message] table tbody tr:nth-child(even),
.custom-chat-message table tbody tr:nth-child(even) {
  @apply bg-gray-50/50 dark:bg-zinc-800/50 !important;
}

/* ChatGPT-like Welcome Message Styling */
.copilotKitChat h2,
.copilotKitChat [class*="title"],
.copilotKitChat [class*="Title"] {
  @apply text-center text-gray-700 dark:text-gray-300 !important;
  @apply text-lg font-normal !important;
  @apply mb-6 mt-8 !important;
  @apply px-4 !important;
}

/* Input field styling - ChatGPT-like rounded input */
.copilotKitChat input[type="text"],
.copilotKitChat textarea {
  @apply rounded-full !important;
  @apply border border-gray-300 dark:border-zinc-600 !important;
  @apply bg-white dark:bg-zinc-800 !important;
  @apply px-4 py-3 !important;
  @apply text-gray-900 dark:text-gray-100 !important;
}

.copilotKitChat input[type="text"]::placeholder,
.copilotKitChat textarea::placeholder {
  @apply text-gray-500 dark:text-gray-400 !important;
}

/* CopilotKit Suggestions Styling */
.copilotKitSuggestions,
[data-copilot-suggestions] {
  @apply flex gap-1.5 overflow-x-auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(99, 102, 241, 0.3) transparent;
  /* Ensure suggestions are fully visible on both sides */
  padding-left: 1rem !important;
  padding-right: 1rem !important;
  /* Add bottom padding to prevent being cut off by input field */
  padding-bottom: 4rem !important;
  margin-bottom: 1rem !important;
  /* Ensure container allows full scrolling */
  overflow-x: auto !important;
  -webkit-overflow-scrolling: touch;
  /* Extend beyond parent padding to prevent clipping */
  margin-left: -0.5rem;
  margin-right: -0.5rem;
  width: calc(100% + 1rem);
}

.copilotKitSuggestions::-webkit-scrollbar,
[data-copilot-suggestions]::-webkit-scrollbar {
  height: 4px;
}

.copilotKitSuggestions::-webkit-scrollbar-track,
[data-copilot-suggestions]::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.copilotKitSuggestions::-webkit-scrollbar-thumb,
[data-copilot-suggestions]::-webkit-scrollbar-thumb {
  @apply bg-indigo-300 dark:bg-indigo-700 rounded-full;
}

.copilotKitSuggestions button,
[data-copilot-suggestions] button {
  @apply flex-shrink-0 px-3 py-1.5 rounded-full border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 hover:border-indigo-300 dark:hover:border-indigo-600 transition-all duration-200 shadow-sm hover:shadow-md;
}

/* Transaction Grid Horizontal Scroll */
.transaction-grid-scroll {
  @apply flex gap-4 overflow-x-auto pb-2;
  scrollbar-width: thin;
  scrollbar-color: rgba(99, 102, 241, 0.3) transparent;
  -webkit-overflow-scrolling: touch;
}

.transaction-grid-scroll::-webkit-scrollbar {
  height: 6px;
}

.transaction-grid-scroll::-webkit-scrollbar-track {
  @apply bg-gray-100 dark:bg-zinc-800 rounded-full;
}

.transaction-grid-scroll::-webkit-scrollbar-thumb {
  @apply bg-indigo-400 dark:bg-indigo-600 rounded-full hover:bg-indigo-500 dark:hover:bg-indigo-500;
}

/* Smooth animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.transaction-card {
  animation: fadeIn 0.3s ease-out;
}

/* Chat message animations */
.copilotKitMessage {
  @apply transition-all duration-200;
}

/* Message content styling - prevent overlap with icons */
.copilotKitChat [data-copilot-chat-message] p,
.copilotKitChat [data-copilot-chat-message] div[class*="content"],
.copilotKitMessage p,
.copilotKitMessage div[class*="content"] {
  @apply mb-2 !important;
  @apply pr-8 !important;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Hide copy to clipboard and regenerate response icons */
/* Target all action buttons that appear after assistant messages */
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] ~ div[class*="action"],
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] + div[class*="action"],
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] ~ div[class*="button"]:not([data-copilot-chat-send-button]):not([data-copilot-chat-stop-button]),
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] + div[class*="button"]:not([data-copilot-chat-send-button]):not([data-copilot-chat-stop-button]),
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] ~ div[class*="icon"],
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] + div[class*="icon"],
/* Target buttons by aria-label, title, or common class patterns */
.copilotKitChat [data-copilot-chat-message] button[aria-label*="Copy"],
.copilotKitChat [data-copilot-chat-message] button[aria-label*="copy"],
.copilotKitChat [data-copilot-chat-message] button[title*="Copy"],
.copilotKitChat [data-copilot-chat-message] button[title*="copy"],
.copilotKitChat [data-copilot-chat-message] button[aria-label*="Regenerate"],
.copilotKitChat [data-copilot-chat-message] button[aria-label*="regenerate"],
.copilotKitChat [data-copilot-chat-message] button[title*="Regenerate"],
.copilotKitChat [data-copilot-chat-message] button[title*="regenerate"],
.copilotKitChat [data-copilot-chat-message] ~ div button[aria-label*="Copy"],
.copilotKitChat [data-copilot-chat-message] ~ div button[aria-label*="copy"],
.copilotKitChat [data-copilot-chat-message] ~ div button[aria-label*="Regenerate"],
.copilotKitChat [data-copilot-chat-message] ~ div button[aria-label*="regenerate"],
.copilotKitChat [data-copilot-chat-message] + div button:not([data-copilot-chat-send-button]):not([data-copilot-chat-stop-button]),
.copilotKitChat [data-copilot-chat-message] ~ div[class*="action"] button,
.copilotKitChat [data-copilot-chat-message] ~ div[class*="icon"] button,
.copilotKitMessage button[aria-label*="Copy"],
.copilotKitMessage button[aria-label*="copy"],
.copilotKitMessage button[aria-label*="Regenerate"],
.copilotKitMessage button[aria-label*="regenerate"] {
  display: none !important;
  visibility: hidden !important;
}

/* Action icons container - ensure proper spacing (for any remaining icons) */
.copilotKitChat [data-copilot-chat-message] ~ div[class*="action"],
.copilotKitChat [data-copilot-chat-message] + div[class*="button"],
.copilotKitMessage ~ div[class*="action"],
.copilotKitMessage + div[class*="button"] {
  @apply mt-1 !important;
  @apply mb-2 !important;
}

/* CopilotKit action buttons row - prevent overlap */
.copilotKitChat [data-copilot-chat-message] + div,
.copilotKitChat [data-copilot-chat-message] ~ div[class*="flex"],
.copilotKitMessage + div,
.copilotKitMessage ~ div[class*="flex"] {
  @apply mt-1 !important;
}

/* Ensure action icons are positioned below message content */
.copilotKitChat [data-copilot-chat-message] button,
.copilotKitChat [data-copilot-chat-message] svg,
.copilotKitMessage button,
.copilotKitMessage svg {
  @apply relative !important;
  z-index: 1;
}

/* Message wrapper - ensure content doesn't overlap with absolute positioned elements */
.copilotKitChat [data-copilot-chat-message] > div:first-child,
.copilotKitMessage > div:first-child {
  @apply relative !important;
  @apply z-0 !important;
}

/* Ensure message wrapper has proper spacing */
.copilotKitChat [data-copilot-chat-message],
.copilotKitMessage {
  @apply relative !important;
  @apply mb-3 !important;
  @apply flex !important;
  @apply w-full !important;
}

/* User message wrapper - full width container, aligns content to right */
.copilotKitChat [data-copilot-chat-message][data-role="user"],
.copilotKitMessage[data-role="user"] {
  display: flex !important;
  justify-content: flex-end !important;
  align-items: flex-end !important;
  width: 100% !important;
  /* Remove any background/padding from wrapper - only on bubble */
  background: transparent !important;
  background-color: transparent !important;
  padding: 0 !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* User message bubble - target all possible child structures */
.copilotKitChat [data-copilot-chat-message][data-role="user"] > *,
.copilotKitChat [data-copilot-chat-message][data-role="user"] > div,
.copilotKitChat [data-copilot-chat-message][data-role="user"] > span,
.copilotKitMessage[data-role="user"] > *,
.copilotKitMessage[data-role="user"] > div,
.copilotKitMessage[data-role="user"] > span {
  display: inline-block !important;
  width: auto !important;
  max-width: 80% !important;
  margin-left: auto !important;
  margin-right: 0 !important;
  background-color: rgb(17, 24, 39) !important; /* gray-900 */
  color: white !important;
  border-radius: 1rem 1rem 0.25rem 1rem !important; /* rounded-2xl rounded-tr-sm */
  padding: 0.5rem 0.75rem !important; /* px-3 py-2 */
  flex-shrink: 0 !important;
  font-size: 15px !important;
}

/* Dark mode user bubble */
.dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > *,
.dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > div,
.dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > span,
.dark .copilotKitMessage[data-role="user"] > *,
.dark .copilotKitMessage[data-role="user"] > div,
.dark .copilotKitMessage[data-role="user"] > span {
  background-color: rgb(31, 41, 55) !important; /* gray-800 */
}

/* Assistant message wrapper - full width container, aligns content to left */
.copilotKitChat [data-copilot-chat-message][data-role="assistant"],
.copilotKitMessage[data-role="assistant"] {
  display: flex !important;
  justify-content: flex-start !important;
  align-items: flex-start !important;
  width: 100% !important;
  /* Remove any background/padding from wrapper - only on bubble */
  background: transparent !important;
  background-color: transparent !important;
  padding: 0 !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Assistant message bubble - target all possible child structures */
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] > *,
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] > div,
.copilotKitChat [data-copilot-chat-message][data-role="assistant"] > span,
.copilotKitMessage[data-role="assistant"] > *,
.copilotKitMessage[data-role="assistant"] > div,
.copilotKitMessage[data-role="assistant"] > span {
  display: inline-block !important;
  width: auto !important;
  max-width: 80% !important;
  margin-right: auto !important;
  margin-left: 0 !important;
  background-color: rgb(243, 244, 246) !important; /* gray-100 */
  color: rgb(17, 24, 39) !important; /* gray-900 */
  border-radius: 1rem 1rem 1rem 0.25rem !important; /* rounded-2xl rounded-tl-sm */
  padding: 0.5rem 0.75rem !important; /* px-3 py-2 */
  font-size: 15px !important;
}

/* Dark mode assistant bubble */
.dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > *,
.dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > div,
.dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > span,
.dark .copilotKitMessage[data-role="assistant"] > *,
.dark .copilotKitMessage[data-role="assistant"] > div,
.dark .copilotKitMessage[data-role="assistant"] > span {
  background-color: rgb(39, 39, 42) !important; /* zinc-800 */
  color: rgb(244, 244, 245) !important; /* gray-100 */
}

/* Modern button hover effects */
button:hover {
  @apply transition-all duration-200;
}

/* Card hover effects */
.card-hover {
  @apply transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5;
}

/* Loading states */
@keyframes pulse-slow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.loading-pulse {
  animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Mobile optimizations - ChatGPT-like mobile UI */
@media (max-width: 768px) {
  /* Safe area insets for notched devices */
  main {
    padding-top: env(safe-area-inset-top, 0) !important;
    padding-bottom: env(safe-area-inset-bottom, 0) !important;
    padding-left: env(safe-area-inset-left, 0) !important;
    padding-right: env(safe-area-inset-right, 0) !important;
  }
  
  /* Full width chat on mobile - remove all padding/margins */
  .copilotKitChat {
    @apply rounded-none !important;
    @apply h-full !important;
    @apply w-full !important;
    @apply bg-white dark:bg-zinc-900 !important;
    @apply m-0 !important;
    @apply p-0 !important;
    /* Ensure suggestions container is not clipped */
    overflow-x: visible !important;
  }
  
  /* Remove padding from main container on mobile */
  main > div:has(.copilotKitChat) {
    @apply p-0 !important;
  }
  
  /* Ensure parent containers don't clip suggestions */
  .copilotKitChat > div,
  .copilotKitChat > * {
    overflow-x: visible !important;
  }
  
  /* Message bubbles - proper spacing and padding on mobile */
  .copilotKitChat [data-copilot-chat-message],
  .copilotKitMessage {
    @apply mb-2 sm:mb-2.5 !important;
    display: flex !important;
    flex-direction: row !important;
    width: 100% !important;
    max-width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    /* Ensure parent allows proper alignment */
    align-items: flex-start !important;
  }
  
  /* User messages (right side, dark) - wrapper for alignment - MOBILE OVERRIDE */
  .copilotKitChat [data-copilot-chat-message][data-role="user"],
  .copilotKitMessage[data-role="user"] {
    display: flex !important;
    flex-direction: row !important;
    justify-content: flex-end !important;
    align-items: flex-end !important;
    align-content: flex-end !important;
    width: 100% !important;
    max-width: 100% !important;
    background: transparent !important;
    background-color: transparent !important;
    padding: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    /* Override any text alignment */
    text-align: right !important;
  }
  
  /* User message bubble - auto width, right aligned - MOBILE OVERRIDE */
  .copilotKitChat [data-copilot-chat-message][data-role="user"] > *,
  .copilotKitChat [data-copilot-chat-message][data-role="user"] > div,
  .copilotKitChat [data-copilot-chat-message][data-role="user"] > span,
  .copilotKitChat [data-copilot-chat-message][data-role="user"] > p,
  .copilotKitMessage[data-role="user"] > *,
  .copilotKitMessage[data-role="user"] > div,
  .copilotKitMessage[data-role="user"] > span,
  .copilotKitMessage[data-role="user"] > p {
    display: inline-block !important;
    width: auto !important;
    min-width: auto !important;
    max-width: 85% !important;
    margin-left: auto !important;
    margin-right: 0.5rem !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding: 0.375rem 0.5rem !important;
    background-color: rgb(17, 24, 39) !important;
    color: white !important;
    border-radius: 1rem 1rem 0.25rem 1rem !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    font-size: 15px !important;
    text-align: left !important; /* Text inside bubble aligns left */
    /* Force positioning */
    position: relative !important;
    float: none !important;
  }
  
  /* Dark mode user bubble on mobile */
  .dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > *,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > div,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > span,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > p,
  .dark .copilotKitMessage[data-role="user"] > *,
  .dark .copilotKitMessage[data-role="user"] > div,
  .dark .copilotKitMessage[data-role="user"] > span,
  .dark .copilotKitMessage[data-role="user"] > p {
    background-color: rgb(31, 41, 55) !important;
  }
  
  /* AI messages (left side, light) - wrapper for alignment - MOBILE OVERRIDE */
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"],
  .copilotKitMessage[data-role="assistant"] {
    display: flex !important;
    flex-direction: row !important;
    justify-content: flex-start !important;
    align-items: flex-start !important;
    align-content: flex-start !important;
    width: 100% !important;
    max-width: 100% !important;
    background: transparent !important;
    background-color: transparent !important;
    padding: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    /* Override any text alignment */
    text-align: left !important;
  }
  
  /* Assistant message bubble - auto width, left aligned - MOBILE OVERRIDE */
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > *,
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > div,
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > span,
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > p,
  .copilotKitMessage[data-role="assistant"] > *,
  .copilotKitMessage[data-role="assistant"] > div,
  .copilotKitMessage[data-role="assistant"] > span,
  .copilotKitMessage[data-role="assistant"] > p {
    display: inline-block !important;
    width: auto !important;
    min-width: auto !important;
    max-width: 85% !important;
    margin-right: auto !important;
    margin-left: 0.5rem !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding: 0.375rem 0.5rem !important;
    background-color: rgb(243, 244, 246) !important;
    color: rgb(17, 24, 39) !important;
    border-radius: 1rem 1rem 1rem 0.25rem !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    font-size: 15px !important;
    text-align: left !important;
    /* Force positioning */
    position: relative !important;
    float: none !important;
  }
  
  /* Dark mode assistant bubble on mobile */
  .dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > *,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > div,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > span,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > p,
  .dark .copilotKitMessage[data-role="assistant"] > *,
  .dark .copilotKitMessage[data-role="assistant"] > div,
  .dark .copilotKitMessage[data-role="assistant"] > span,
  .dark .copilotKitMessage[data-role="assistant"] > p {
    background-color: rgb(39, 39, 42) !important;
    color: rgb(244, 244, 245) !important;
  }
  
  /* Message content - extra padding to prevent icon overlap, consistent text size */
  .copilotKitChat [data-copilot-chat-message] p,
  .copilotKitChat [data-copilot-chat-message] div[class*="content"],
  .copilotKitMessage p,
  .copilotKitMessage div[class*="content"] {
    @apply pr-8 sm:pr-10 !important;
    @apply mb-1 !important;
    font-size: 15px !important; /* Consistent size for all message content */
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
  
  /* Action icons - ensure they're below content, not overlapping */
  .copilotKitChat [data-copilot-chat-message] ~ div[class*="action"],
  .copilotKitChat [data-copilot-chat-message] + div[class*="button"],
  .copilotKitChat [data-copilot-chat-message] ~ button,
  .copilotKitMessage ~ div[class*="action"],
  .copilotKitMessage + div[class*="button"],
  .copilotKitMessage ~ button {
    @apply mt-1 !important;
    @apply mb-2 !important;
    @apply mx-2 sm:mx-3 !important;
  }
  
  /* Icon buttons row - proper spacing */
  .copilotKitChat [data-copilot-chat-message] + div[class*="icon"],
  .copilotKitChat [data-copilot-chat-message] ~ div[class*="icon"],
  .copilotKitMessage + div[class*="icon"],
  .copilotKitMessage ~ div[class*="icon"] {
    @apply flex gap-2 !important;
    @apply mt-1 mb-2 !important;
    @apply px-2 !important;
    @apply justify-start !important;
  }
  
  /* Welcome message - smaller on mobile */
  .copilotKitChat h2,
  .copilotKitChat [class*="title"],
  .copilotKitChat [class*="Title"] {
    @apply text-base sm:text-lg !important;
    @apply mb-4 sm:mb-6 mt-4 sm:mt-6 !important;
    @apply px-3 sm:px-4 !important;
  }
  
  /* Input area - better mobile spacing */
  .copilotKitChat input[type="text"],
  .copilotKitChat textarea {
    @apply text-base !important;
    @apply py-2.5 sm:py-3 !important;
  }
  
  /* Transaction grid */
  .transaction-grid-scroll {
    @apply gap-2 sm:gap-3;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
  }
  
  .transaction-card {
    scroll-snap-align: start;
  }
  
  /* Suggestions - better mobile layout */
  .copilotKitSuggestions,
  [data-copilot-suggestions] {
    @apply gap-1 sm:gap-1.5;
    -webkit-overflow-scrolling: touch;
    /* Ensure suggestions are fully visible on both sides - mobile */
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    /* Add bottom padding to prevent being cut off by sticky input field on mobile */
    padding-bottom: 6rem !important;
    margin-bottom: 2rem !important;
    /* Ensure container allows full scrolling */
    overflow-x: auto !important;
    /* Prevent clipping on mobile - extend beyond parent padding */
    margin-left: -1rem !important;
    margin-right: -1rem !important;
    width: calc(100% + 2rem) !important;
  }
  
  .copilotKitSuggestions button,
  [data-copilot-suggestions] button {
    @apply text-xs px-2 sm:px-2.5 py-1 sm:py-1.5;
    scroll-snap-align: start;
  }
  
  /* Improve touch targets on mobile */
  button, a {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Input container - better mobile padding with safe area insets */
  .copilotKitChat form,
  .copilotKitChat [class*="input-container"],
  .copilotKitChat [class*="Input"] {
    @apply px-2 sm:px-3 !important;
    padding-bottom: calc(0.75rem + env(safe-area-inset-bottom, 0)) !important;
    @apply pt-1.5 sm:pt-2 !important;
  }
  
  /* Custom input wrapper with safe area insets */
  .copilotKitChat > div:has(input[type="text"]) {
    @apply px-2 sm:px-3 !important;
    padding-bottom: calc(0.75rem + env(safe-area-inset-bottom, 0)) !important;
  }
  
  /* Ensure input is visible and not cut off */
  .copilotKitChat > div:last-child {
    @apply mb-0 !important;
  }
  
  /* Widget cards - better mobile spacing */
  [class*="Card"] {
    @apply rounded-lg sm:rounded-xl;
  }
  
  /* Balance card - mobile adjustments */
  .balance-card,
  [class*="BalanceCard"] {
    @apply mx-2 sm:mx-0;
  }
  
  /* Transaction grid card - mobile adjustments */
  [class*="TransactionGrid"] {
    @apply mx-2 sm:mx-0;
  }
  
  /* Ensure chat container uses full width on mobile */
  main {
    @apply w-full !important;
  }
  
  /* Chat wrapper - full width on mobile */
  main > div:last-child {
    @apply w-full !important;
    @apply max-w-full !important;
  }
  
  /* Header buttons - smaller on mobile */
  header button,
  [class*="Header"] button {
    @apply text-sm !important;
    @apply px-2 py-1 !important;
  }
}

/* Extra small mobile devices (phones in portrait) */
@media (max-width: 480px) {
  /* Message wrapper - no horizontal margin to allow proper alignment */
  .copilotKitChat [data-copilot-chat-message],
  .copilotKitMessage {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  
  /* User messages on extra small screens - FORCE RIGHT ALIGNMENT */
  .copilotKitChat [data-copilot-chat-message][data-role="user"],
  .copilotKitMessage[data-role="user"] {
    display: flex !important;
    flex-direction: row !important;
    justify-content: flex-end !important;
    align-items: flex-end !important;
    align-content: flex-end !important;
    width: 100% !important;
    max-width: 100% !important;
    background: transparent !important;
    background-color: transparent !important;
    padding: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    text-align: right !important;
  }
  
  /* User message bubble on extra small screens - FORCE RIGHT */
  .copilotKitChat [data-copilot-chat-message][data-role="user"] > *,
  .copilotKitChat [data-copilot-chat-message][data-role="user"] > div,
  .copilotKitChat [data-copilot-chat-message][data-role="user"] > span,
  .copilotKitChat [data-copilot-chat-message][data-role="user"] > p,
  .copilotKitMessage[data-role="user"] > *,
  .copilotKitMessage[data-role="user"] > div,
  .copilotKitMessage[data-role="user"] > span,
  .copilotKitMessage[data-role="user"] > p {
    display: inline-block !important;
    width: auto !important;
    min-width: auto !important;
    max-width: 85% !important;
    margin-left: auto !important;
    margin-right: 0.5rem !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding: 0.375rem 0.5rem !important;
    background-color: rgb(17, 24, 39) !important;
    color: white !important;
    border-radius: 1rem 1rem 0.25rem 1rem !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    font-size: 15px !important;
    text-align: left !important;
    position: relative !important;
    float: none !important;
  }
  
  .dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > *,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > div,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > span,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="user"] > p,
  .dark .copilotKitMessage[data-role="user"] > *,
  .dark .copilotKitMessage[data-role="user"] > div,
  .dark .copilotKitMessage[data-role="user"] > span,
  .dark .copilotKitMessage[data-role="user"] > p {
    background-color: rgb(31, 41, 55) !important;
  }
  
  /* Assistant message wrapper on extra small screens - FORCE LEFT ALIGNMENT */
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"],
  .copilotKitMessage[data-role="assistant"] {
    display: flex !important;
    flex-direction: row !important;
    justify-content: flex-start !important;
    align-items: flex-start !important;
    align-content: flex-start !important;
    width: 100% !important;
    max-width: 100% !important;
    background: transparent !important;
    background-color: transparent !important;
    padding: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    text-align: left !important;
  }
  
  /* Assistant message bubble on extra small screens - FORCE LEFT */
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > *,
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > div,
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > span,
  .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > p,
  .copilotKitMessage[data-role="assistant"] > *,
  .copilotKitMessage[data-role="assistant"] > div,
  .copilotKitMessage[data-role="assistant"] > span,
  .copilotKitMessage[data-role="assistant"] > p {
    display: inline-block !important;
    width: auto !important;
    min-width: auto !important;
    max-width: 85% !important;
    margin-right: auto !important;
    margin-left: 0.5rem !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding: 0.375rem 0.5rem !important;
    background-color: rgb(243, 244, 246) !important;
    color: rgb(17, 24, 39) !important;
    border-radius: 1rem 1rem 1rem 0.25rem !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    font-size: 15px !important;
    text-align: left !important;
    position: relative !important;
    float: none !important;
  }
  
  .dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > *,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > div,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > span,
  .dark .copilotKitChat [data-copilot-chat-message][data-role="assistant"] > p,
  .dark .copilotKitMessage[data-role="assistant"] > *,
  .dark .copilotKitMessage[data-role="assistant"] > div,
  .dark .copilotKitMessage[data-role="assistant"] > span,
  .dark .copilotKitMessage[data-role="assistant"] > p {
    background-color: rgb(39, 39, 42) !important;
    color: rgb(244, 244, 245) !important;
  }
  
  /* Consistent text size on very small screens */
  .copilotKitChat [data-copilot-chat-message] p,
  .copilotKitChat [data-copilot-chat-message] div[class*="content"],
  .copilotKitMessage p,
  .copilotKitMessage div[class*="content"] {
    font-size: 15px !important; /* Keep consistent size, don't reduce */
  }
  
  /* Tighter input padding with safe area insets */
  .copilotKitChat form,
  .copilotKitChat [class*="input-container"],
  .copilotKitChat [class*="Input"] {
    @apply px-2 !important;
    padding-bottom: calc(0.75rem + env(safe-area-inset-bottom, 0)) !important;
  }
  
  /* Extra small screens - ensure suggestions are fully visible */
  .copilotKitSuggestions,
  [data-copilot-suggestions] {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    /* Add bottom padding to prevent being cut off by input field */
    padding-bottom: 6rem !important;
    margin-bottom: 2rem !important;
    overflow-x: auto !important;
    /* Prevent clipping on extra small screens - extend beyond parent */
    margin-left: -1rem !important;
    margin-right: -1rem !important;
    width: calc(100% + 2rem) !important;
  }
}

